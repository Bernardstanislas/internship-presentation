<!DOCTYPE HTML>
<html lang="fr" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Détail composite | Focus-Docs</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.4.3">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../../recipes/pages/page-liste-detail/index.html" />
    
    
    <link rel="prev" href="../../../recipes/pages/index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="5.4.1" data-basepath="../../.." data-revision="Wed Oct 14 2015 16:47:50 GMT+0200 (Paris, Madrid (heure d’été))">
    

<div class="book-summary">
    <div class="book-search" role="search">
        <input type="text" placeholder="Tapez pour rechercher" class="form-control" />
    </div>
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="getting-started/index.html">
            
                
                    <a href="../../../getting-started/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting started
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="introduction/index.html">
            
                
                    <a href="../../../introduction/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="basics/index.html">
            
                
                    <a href="../../../basics/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Bases
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="basics/flux/index.html">
            
                
                    <a href="../../../basics/flux/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Flux
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="basics/flux/store/index.html">
            
                
                    <a href="../../../basics/flux/store/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.</b>
                        
                        Store
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="basics/flux/dispatcher/index.html">
            
                
                    <a href="../../../basics/flux/dispatcher/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.</b>
                        
                        AppDispatcher
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="basics/flux/action/index.html">
            
                
                    <a href="../../../basics/flux/action/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.</b>
                        
                        Action
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="basics/flux/composant-react/index.html">
            
                
                    <a href="../../../basics/flux/composant-react/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.</b>
                        
                        Composant
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="advanced/index.html">
            
                
                    <a href="../../../advanced/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Concepts avancés
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="advanced/ecrire-composant/index.html">
            
                
                    <a href="../../../advanced/ecrire-composant/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Ecrire un composant
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="recipes/index.html">
            
                
                    <a href="../../../recipes/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Recettes
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="recipes/navigation/index.html">
            
                
                    <a href="../../../recipes/navigation/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Navigation
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="recipes/navigation/ajouter-route/index.html">
            
                
                    <a href="../../../recipes/navigation/ajouter-route/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.</b>
                        
                        Ajouter une route
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="recipes/navigation/naviguer/index.html">
            
                
                    <a href="../../../recipes/navigation/naviguer/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.2.</b>
                        
                        Naviguer
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="recipes/services/index.html">
            
                
                    <a href="../../../recipes/services/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Services REST
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="recipes/services/definir-service-rest/index.html">
            
                
                    <a href="../../../recipes/services/definir-service-rest/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.1.</b>
                        
                        Définir un service
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2.2" data-path="recipes/services/consommer-service-rest/index.html">
            
                
                    <a href="../../../recipes/services/consommer-service-rest/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.2.</b>
                        
                        Consommer un service
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="recipes/stores/index.html">
            
                
                    <a href="../../../recipes/stores/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Stores
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.1" data-path="recipes/stores/definition-store/index.html">
            
                
                    <a href="../../../recipes/stores/definition-store/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.1.</b>
                        
                        Définir un store
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="recipes/pages/index.html">
            
                
                    <a href="../../../recipes/pages/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Pages
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.4.1" data-path="recipes/pages/page-detail-composite/index.html">
            
                
                    <a href="../../../recipes/pages/page-detail-composite/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.1.</b>
                        
                        Détail composite
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4.2" data-path="recipes/pages/page-liste-detail/index.html">
            
                
                    <a href="../../../recipes/pages/page-liste-detail/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.2.</b>
                        
                        Liste/détail
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4.3" data-path="recipes/pages/panneau-glissant/index.html">
            
                
                    <a href="../../../recipes/pages/panneau-glissant/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.3.</b>
                        
                        Panneau glissant
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4.4" data-path="recipes/pages/page-recherche-rapide/index.html">
            
                
                    <a href="../../../recipes/pages/page-recherche-rapide/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.4.</b>
                        
                        Recherche rapide
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4.5" data-path="recipes/pages/page-recherche-avancee/index.html">
            
                
                    <a href="../../../recipes/pages/page-recherche-avancee/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.5.</b>
                        
                        Recherche avancée
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4.6" data-path="recipes/pages/page-recherche-criteres/index.html">
            
                
                    <a href="../../../recipes/pages/page-recherche-criteres/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.6.</b>
                        
                        Recherche avec critères
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="recipes/layout/index.html">
            
                
                    <a href="../../../recipes/layout/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Layout
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.5.1" data-path="recipes/layout/surcharger-layout/index.html">
            
                
                    <a href="../../../recipes/layout/surcharger-layout/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.1.</b>
                        
                        Surcharger le Layout
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5.2" data-path="recipes/layout/definir-menu-gauche/index.html">
            
                
                    <a href="../../../recipes/layout/definir-menu-gauche/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.2.</b>
                        
                        Menu de gauche
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5.3" data-path="recipes/layout/definir-cartouche/index.html">
            
                
                    <a href="../../../recipes/layout/definir-cartouche/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.3.</b>
                        
                        Cartouche
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="recipes/liste-references/index.html">
            
                
                    <a href="../../../recipes/liste-references/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Listes de références
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.6.1" data-path="recipes/liste-references/definition-liste-references/index.html">
            
                
                    <a href="../../../recipes/liste-references/definition-liste-references/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.1.</b>
                        
                        Définir une liste
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6.2" data-path="recipes/liste-references/utiliser-liste-references/index.html">
            
                
                    <a href="../../../recipes/liste-references/utiliser-liste-references/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.2.</b>
                        
                        Utiliser une liste
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="recipes/modele/index.html">
            
                
                    <a href="../../../recipes/modele/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Modèle
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.7.1" data-path="recipes/modele/definition-domaine/index.html">
            
                
                    <a href="../../../recipes/modele/definition-domaine/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.1.</b>
                        
                        Domaine
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7.2" data-path="recipes/modele/entity-definition/index.html">
            
                
                    <a href="../../../recipes/modele/entity-definition/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.2.</b>
                        
                        Entity definition
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="troubleshooting/index.html">
            
                
                    <a href="../../../troubleshooting/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Problèmes récurents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Glossary.html">
            
                
                    <a href="../../../Glossary.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Glossaire
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="focus/index.html">
            
                
                    <a href="../../../focus/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        API Focus
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="focus-components/index.html">
            
                
                    <a href="../../../focus-components/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        API Focus Components
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="maintenance/index.html">
            
                
                    <a href="../../../maintenance/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Maintenance
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Publié avec GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table des matières"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Recherche"><i class="fa fa-search"></i></a>
    
    <a href="../../../GLOSSARY.html" class="btn pull-left" aria-label="Glossaire"><i class="fa fa-sort-alpha-asc"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Paramètres de Police"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">Clair</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sépia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Nuit</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Partage"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Partager sur Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Partager sur Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Partager sur Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Partager sur Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Partager sur Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../../" >Focus-Docs</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="page-de-d%C3%A9tail-composite">Page de d&#xE9;tail composite</h1>
<h2 id="pr%C3%A9sentation">Pr&#xE9;sentation</h2>
<p>Ce tutoriel explique comment impl&#xE9;menter une page de d&#xE9;tail avec ses fonctions de chargement de donn&#xE9;es, de sauvegarde ainsi que la navigation entre les blocs gr&#xE2;ce &#xE0; la barre &#xE0; gauche de l&apos;&#xE9;cran.</p>
<h2 id="impl%C3%A9mentation">Impl&#xE9;mentation</h2>
<p>Les pages de d&#xE9;tail sont souvent d&#xE9;clin&#xE9;es en plusieurs blocs.</p>
<p>Un bon exemple d&apos;application serait la page de d&#xE9;tail d&apos;un utilisateur de l&apos;application sur laquelle les informations personnelles de l&apos;utilisateur (nom, pr&#xE9;nom, date de naissance ...) seraient dans un bloc et ses informations professionnelles (poste occup&#xE9;, autorisations, mail, t&#xE9;l&#xE9;phone ...) dans un autre bloc.</p>
<p>Pour r&#xE9;aliser cette page, nous devons suivre les &#xE9;tapes de la check list suivante :</p>
<p>Check list :</p>
<ul>
<li>Impl&#xE9;menter le service c&#xF4;t&#xE9; serveur</li>
<li>Impl&#xE9;menter l&apos;URL c&#xF4;t&#xE9; client</li>
<li>Impl&#xE9;menter le service c&#xF4;t&#xE9; client</li>
<li>Impl&#xE9;menter l&apos;action</li>
<li>Impl&#xE9;menter les blocs</li>
<li>Impl&#xE9;menter le composant de la page</li>
<li>Impl&#xE9;menter la route vers la page</li>
</ul>
<h3 id="services">Services</h3>
<p>Tout d&apos;abord pour assurer l&apos;affichage du contenu des blocs de pages de d&#xE9;tail ainsi que les actions d&apos;ajout, modification et suppression des donn&#xE9;es, nous devons impl&#xE9;menter les services relatifs &#xE0; la donn&#xE9;e d&#xE9;taill&#xE9;e dans le bloc.</p>
<h4 id="c%C3%B4t%C3%A9-serveur">C&#xF4;t&#xE9; serveur</h4>
<p>Nous supposerons que nous avons d&#xE9;j&#xE0; impl&#xE9;ment&#xE9; ces services c&#xF4;t&#xE9; server et que nous disposons d&apos;un webservice permettant d&apos;y avoir acc&#xE8;s. L&apos;extrait de code suivant provient du fichier de webservice <code>WsUser.java</code>.</p>
<pre><code class="lang-java"><span class="hljs-annotation">@GET</span>(<span class="hljs-string">&quot;/{id}/usrPersonalInfo&quot;</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> UserPersonalInfo <span class="hljs-title">getUserPersonalInfoById</span><span class="hljs-params">(@PathParam(<span class="hljs-string">&quot;id&quot;</span>)</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> id) </span>{
    <span class="hljs-keyword">return</span> userServices.getUserPersonalInfoById(id);
};
</code></pre>
<p>Ce service permet r&#xE9;cup&#xE9;rer les informations personnelles d&apos;un utilisateur dont nous connaissons l&apos;id en utilisant l&apos;URL <code>racine/valeur_id/usrPersonalInfo</code>.</p>
<h4 id="c%C3%B4t%C3%A9-client">C&#xF4;t&#xE9; client</h4>
<p>Une fois le fichier de webservice pr&#xEA;t c&#xF4;t&#xE9; server il ne nous reste plus qu&apos;&#xE0; le renseigner c&#xF4;t&#xE9; client. Cette d&#xE9;marche se fait en trois &#xE9;tapes:</p>
<ul>
<li>Renseigner l&apos;URL du webservice :
<br> 1) Naviguer jusqu&apos;&#xE0; app/config/server
2) Si un fichier du nom de la donn&#xE9;e n&apos;existe pas, le cr&#xE9;er, sinon l&apos;ouvrir.
3) Renseigner l&apos;URL de la fa&#xE7;on suivante :</li>
</ul>
<pre><code class="lang-Javascript"><span class="hljs-keyword">var</span> root = <span class="hljs-string">&quot;./api/user/&quot;</span>;
<span class="hljs-keyword">var</span> url = Focus.util.url.builder;
<span class="hljs-built_in">module</span>.exports = {
<span class="hljs-comment">// ...</span>
   getUserPersonalInfoById: url(root + <span class="hljs-string">&quot;${id}&quot;</span> + <span class="hljs-string">&quot;/usrPersonalInfo&quot;</span>, <span class="hljs-string">&apos;GET&apos;</span>)
<span class="hljs-comment">// ...</span>
};
</code></pre>
<ul>
<li>Cr&#xE9;er un service en faisant appel &#xE0; l&apos;URL renseign&#xE9;e :
<br> 1) Naviguer jusqu&apos;&#xE0; app/services
2) Si un fichier du nom de la donn&#xE9;e n&apos;existe pas, le cr&#xE9;er, sinon ouvrir.
3) Cr&#xE9;er le service de la fa&#xE7;on suivante :</li>
</ul>
<pre><code class="lang-Javascript"><span class="hljs-keyword">var</span> URL = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../config/server&apos;</span>);
<span class="hljs-keyword">var</span> fetch = Focus.network.fetch;
<span class="hljs-built_in">module</span>.exports = {
<span class="hljs-comment">// ...</span>
   getUserPersonalInfoById: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserPersonalInfoById</span>(<span class="hljs-params">usrId</span>)</span>{
       <span class="hljs-keyword">return</span> fetch(URL.user.getUserPersonalInfoById({urlData:{id:usrId}}));
    }
<span class="hljs-comment">// ...</span>
};
</code></pre>
<h3 id="actions">Actions</h3>
<p>Le r&#xF4;le d&apos;une action est essentiellement de faire appel &#xE0; un service renseign&#xE9; et de mettre &#xE0; jour un store.</p>
<p>Il est aussi possible de faire appel &#xE0; plusieurs services &quot;secondaires&quot; si la t&#xE2;che du premier service est remplie avec succ&#xE8;s.</p>
<p>L&apos;extrait de code suivant du fichier <code>app/action/user/index.js</code> illustre la forme la plus courante du code d&apos;une action :</p>
<pre><code class="lang-Javascript"><span class="hljs-keyword">var</span> AppDispatcher = Focus.dispatcher;
<span class="hljs-keyword">var</span> userServices = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../services&apos;</span>).user;
<span class="hljs-built_in">module</span>.exports = {
<span class="hljs-comment">// ...</span>
   loadUserPersonalInfoById: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadUserPersonalInfoById</span>(<span class="hljs-params">usrId</span>)</span>{
       userServices.getUserPersonalInfoById().then(
            <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>)</span>{
                AppDispatcher.handleServerAction({
                    data: {userPersonalInfo: data},
                    type: <span class="hljs-string">&quot;update&quot;</span>
                });
            }
        )
    }
<span class="hljs-comment">// ...</span>
};
</code></pre>
<p>Le store mis &#xE0; jour dans cet exemple est <code>userPersonalInfo</code>.</p>
<p>Si ce store n&apos;existe pas, il faut le cr&#xE9;er dans le fichier <code>app/stores/user.js</code>.</p>
<h4 id="blocs-de-d%C3%A9tail">Blocs de d&#xE9;tail</h4>
<p>Maintenant que nous disposons d&apos;actions, nous pouvons commencer &#xE0; construire nos blocs.</p>
<p>Continuons de travailler sur le bloc relatif aux donn&#xE9;es personnelles de l&apos;utilisateur. Ce bloc contiendra le nom, pr&#xE9;nom, la date et le lieu de naissance.</p>
<p>Dans <code>app/views</code> chercher le dossier <code>user</code>, si le dossier n&apos;existe pas encore, le cr&#xE9;er.</p>
<p>Cr&#xE9;er ensuite le fichier <code>userPersonalInfo.jsx</code> :</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> formMixin = FocusComponents.common.form.mixin;
<span class="hljs-keyword">var</span> userAction = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../action/user&apos;</span>);
<span class="hljs-keyword">var</span> userStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../stores/user&apos;</span>);
<span class="hljs-keyword">var</span> Block = FocusComponents.common.block.component;

<span class="hljs-built_in">module</span>.exports = React.createClass({
    definitionPath: <span class="hljs-string">&apos;usrPersonalInfo&apos;</span>,
    displayName: <span class="hljs-string">&apos;usrPersonalInfo&apos;</span>,
    mixins: [formMixin],
    stores: [{store: userStore, properties: [<span class="hljs-string">&quot;usrPersonalInfo&quot;</span>]}],
    <span class="hljs-comment">/** @inheritDoc */</span>
    action:{
        load: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadUserPersonalInfoById</span>(<span class="hljs-params">id</span>) </span>{
            userAction.loadUserPersonalInfoById(id);
        },
        save: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveUsrPersonalInfo</span>(<span class="hljs-params">usrPersonalInfo</span>)</span>{
            userAction.saveUserPersonalInfo(usrPersonalInfo);
        }
    },
    renderContent: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (
                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Block</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">{i18n.t(&apos;donnee.resume.title&apos;)}</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>{this.fieldFor(&apos;nom&apos;)}<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>{this.fieldFor(&apos;prenom&apos;)}<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>{this.fieldFor(&apos;dateNaissance&apos;)}<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>{this.fieldFor(&apos;lieuNaissance&apos;)}<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">Block</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        )</span>;
    }
});
</code></pre>
<p>Nous commen&#xE7;ons d&apos;abord par importer le mixin des formulaires <code>formMixin</code>, le store, le fichier des actions ainsi que le composant focus <code>Block</code>.</p>
<p>Le <code>definition path</code> doit correspondre au type de donn&#xE9;es manipul&#xE9;es sur cette page.</p>
<p>Nous sp&#xE9;cifions ensuite les &#xE9;l&#xE9;ments du store auxquels nous souhaitons nous abonner, dans cet exemple c&apos;est <code>usrPersonalInfo</code>.</p>
<p>Pour brancher les actions de <code>load</code> et de <code>save</code> pour ce d&#xE9;tail de bloc, il suffit de les surcharger comme sur l&apos;exemple. Ainsi les donn&#xE9;es seront charg&#xE9;es au chargement de la page et le <code>save</code> sera automatiquement branch&#xE9; sur le bouton <code>save</code> du bloc.</p>
<p>Enfin, dans le <code>renderContent</code>, nous cr&#xE9;ons notre bloc &#xE0; l&apos;aide du composant focus <code>Block</code> que nous avons import&#xE9;. Nous remplissons le composant par des <code>div</code> contenant les valeurs des attributs charg&#xE9;s depuis le store. Dans ce cas nous utilisons un <code>fieldFor</code> &#xE0; l&apos;int&#xE9;rieur des <code>div</code>.</p>
<h4 id="page-de-d%C3%A9tail">Page de d&#xE9;tail</h4>
<p>Une fois que tous nos blocs sont cr&#xE9;&#xE9;s, il nous suffit de les rassembler dans un fichier <code>index.jsx</code> (souvent plac&#xE9; dans le m&#xEA;me dossier <code>app/views/user</code>).</p>
<p>Dans notre exemple, le fichier <code>userPersonalInfo.jsx</code> a besoin du param&#xE8;tre <code>id</code> pour pouvoir charger les donn&#xE9;es relatives de l&apos;utilisateur. Ce param&#xE8;tre est typiquement transmis en tant que <code>props</code>.</p>
<p>Voici la m&#xE9;thode <code>render</code> du fichier <code>index.jsx</code> rassemblant les blocs de cette page de d&#xE9;tail.</p>
<pre><code class="lang-Javascript">
render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderUserView</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">return</span>(
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Detail</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">UserPersonalInfo</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">{this.props.id}</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">UserProfessionalInfo</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">{this.props.id}</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Detail</span>&gt;</span>
        )</span>
    }
</code></pre>
<p>Les blocs import&#xE9;s sont rassembl&#xE9;s dans le composant focus <code>&lt;Detail&gt;</code> qui permet de cr&#xE9;er automatiquement la barre de navigation &#xE0; gauche.</p>
<h4 id="en-t%C3%AAte">En t&#xEA;te</h4>
<p>TODO</p>
<h4 id="router">Router</h4>
<p>TODO</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../../recipes/pages/index.html" class="navigation navigation-prev " aria-label="Previous page: Pages"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../../recipes/pages/page-liste-detail/index.html" class="navigation navigation-next " aria-label="Next page: Liste/détail"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
